generator client {
  provider = "prisma-client-py"
}

datasource db {
  provider = "sqlite"
  url      = "file:dev.db"
}

model Candidate {
  id        Int      @id @default(autoincrement())
  handle    String   @unique
  name      String?
  bio       String?
  followers Int?
  avatar    String?
  recentTweet String?
  createdAt DateTime @default(now())
  searches  SearchResult[]

  @@map("Candidate")
}

model SearchSession {
  id        Int      @id @default(autoincrement())
  jobTitle  String
  keywords  String   // comma-separated
  createdAt DateTime @default(now())
  results   SearchResult[]

  @@map("SearchSession")
}

model SearchResult {
  id          Int           @id @default(autoincrement())
  score       Int           // 1-100 from Grok
  reasoning   String?       // optional explanation
  candidateId Int
  sessionId   Int
  candidate   Candidate     @relation(fields: [candidateId], references: [id])
  session     SearchSession @relation(fields: [sessionId], references: [id])

  @@map("SearchResult")
}